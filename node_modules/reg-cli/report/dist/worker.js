!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/static",n(n.s=113)}({113:function(e,t,n){"use strict";var r,o,i,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(114).ModuleClass,c=n(116).version,u=!1,l=null;function f(e){var t=e.data,n=t.raw,r=t.img1,o=t.img2,i=t.actualSrc,a=t.expectedSrc,c=t.seq,u=self.Module.detectDiff(Module,r,o,{});self.postMessage({type:"res_calc",seq:c,raw:n,actualSrc:i,expectedSrc:a,result:s({},u,{images:[{width:r.width,height:r.height},{width:o.width,height:o.height}]})})}self.Module=new a({version:(r=c,o=r.match(/^(\d*)\.(\d*)\.(\d*)/),i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(o,4),i[0],1e4*+i[1]+100*+i[2]+ +i[3]),wasmUrl:self.wasmUrl,init:function(){u=!0,l&&f(l),self.postMessage({type:"init"})}}),self.addEventListener("message",function(e){switch(e.data.type){case"req_calc":u?f(e):l=e}})},114:function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(115),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initCb=t.init,this._version=t.version,this._wasmUrl=t.wasmUrl}return r(e,[{key:"locateFile",value:function(e){return self.location.pathname.replace(/\/[^\/]*$/,"/")+e}},{key:"instantiateWasm",value:function(e,t){return o(this._version,this._wasmUrl,e).then(function(e){return t(e)}),{}}},{key:"onInit",value:function(e){this._initCb=e}},{key:"onRuntimeInitialized",value:function(){if(this._initCb)return this._initCb(this)}}]),e}();e.exports={ModuleClass:i}},115:function(e,t,n){"use strict";e.exports=function(e,t,n){var r="wasm-cache";function o(){return fetch(t).then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,n)})}return new Promise(function(t,n){var o=indexedDB.open("wasm-cache",e);o.onerror=n.bind(null,"Error opening wasm cache database"),o.onsuccess=function(){t(o.result)},o.onupgradeneeded=function(e){var t=o.result;t.objectStoreNames.contains(r)&&(console.log("Clearing out version "+e.oldVersion+" wasm cache"),t.deleteObjectStore(r)),console.log("Creating version "+e.newVersion+" wasm cache"),t.createObjectStore(r)}}).then(function(e){return(i=e,new Promise(function(e,n){var o=i.transaction([r]).objectStore(r).get(t);o.onerror=n.bind(null,"Error getting wasm module "+t),o.onsuccess=function(r){o.result?e(o.result):n("Module "+t+" was not found in wasm cache")}})).then(function(e){return console.log("Found "+t+" in wasm cache"),WebAssembly.instantiate(e,n)},function(n){return console.log(n),o().then(function(n){return setTimeout(function(){return function(e,n){var o=e.transaction([r],"readwrite").objectStore(r);try{var i=o.put(n,t);i.onerror=function(e){console.log("Failed to store in wasm cache: "+e)},i.onsuccess=function(e){console.log("Successfully stored "+t+" in wasm cache")}}catch(e){console.warn("An error was thrown... in storing wasm cache..."),console.warn(e)}}(e,n.module)},0),n.instance})});var i},function(e){return console.log(e),o().then(function(e){return e.instance})})}},116:function(e){e.exports={name:"x-img-diff-js",version:"0.3.5",main:"src/index.js",description:"compare 2 images considering into translation",scripts:{build:"docker-compose run --rm emcc && npm run build:demo",test:"node test/test_node.js","build:demo":"cp -rf build demo",start:"cd demo; http-server -p 8000","gen:postjs":"babel binding-gen/post.js > bindings/post.js",deploy:"npm run build:demo && gh-pages -d demo"},repository:{type:"git",url:"git+https://github.com/reg-viz/x-img-diff-js.git"},author:"Quramy",license:"MIT",bugs:{url:"https://github.com/reg-viz/x-img-diff-js/issues"},homepage:"https://github.com/reg-viz/x-img-diff-js#readme",devDependencies:{"babel-cli":"^6.26.0","babel-core":"^6.26.0","babel-preset-es2015":"^6.24.1","gh-pages":"^1.0.0","http-server":"^0.10.0",pngjs:"^3.3.0"}}}});